<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì¼ë³¸ì–´ ë‹¨ì–´ì¥</title>
<link rel="manifest" href="manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
:root {
  --bg: #f2f2f7;
  --card: #ffffff;
  --divider: #e5e5ea;
  --text: #1c1c1e;
  --secondary: #6e6e73;
  --accent: #007aff;
}
* { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--bg);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
  color: var(--text);
  display: flex;
  justify-content: center;
  padding: 32px 16px;
  overflow-x: hidden; 
  width: 100vw; 
}

.app { width: 100%; max-width: 420px; }

.header { text-align: center; margin-bottom: 20px; }
.header h1 { font-size: 22px; font-weight: 600; margin: 0; }

.tabs {
  display: flex;
  background: var(--card);
  border-radius: 10px;
  padding: 4px;
  margin-bottom: 20px;
  box-shadow: 0 1px 0 rgba(0,0,0,.05);
}
.tab {
  flex: 1;
  text-align: center;
  padding: 8px 0;
  font-size: 14px;
  color: var(--secondary);
  cursor: pointer;
  border-radius: 8px;
}
.tab.active {
  background: var(--bg);
  color: var(--accent);
  font-weight: 600;
}

.card {
  background: var(--card);
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 1px 0 rgba(0,0,0,.04);
}

.section { display: none; }
.section.active { display: block; }

textarea, input {
  width: 100%;
  border: none;
  background: transparent;
  font-size: 15px;
  padding: 12px 0;
  outline: none;
}
textarea { min-height: 140px; resize: none; }

.divider { height: 1px; background: var(--divider); margin: 12px 0; }

.button {
  text-align: center;
  color: var(--accent);
  font-size: 15px;
  font-weight: 600;
  padding: 12px 0;
  cursor: pointer;
  user-select: none;
}

.word-item {
  display: grid;
  grid-template-columns: 30px 1fr 1fr 35px; 
  gap: 8px;
  align-items: center;
  padding: 8px 0;
}

.word-item input[type="text"] {
  width: 100%;
  padding: 8px 6px;
  background: #f1f1f7;
  border-radius: 6px;
  font-size: 14px;
  border: 1px solid transparent;
  text-align: center;
}

.word-item input:focus {
  background: #ffffff;
  border: 1px solid var(--accent);
}

.word-item button {
  background: #ffe5e5;
  border: none;
  color: #ff3b30;
  font-size: 16px;
  font-weight: bold;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  cursor: pointer;
}

.quiz-question { text-align: center; font-size: 24px; font-weight: 600; margin: 20px 0; }
.quiz-input { text-align: center; font-size: 18px; }
.result { text-align: center; font-size: 14px; margin-top: 12px; height: 1.2em; }
.progress { text-align: center; font-size: 12px; margin-top: 6px; color: var(--secondary); }

.select-container { display: flex; justify-content: center; margin-bottom: 12px; }
.select-container select {
  border-radius: 8px;
  border: 1px solid var(--divider);
  padding: 8px 10px;
  font-size: 14px;
  background: var(--card);
}

.secondary-button {
  background: #efeff4;
  color: var(--accent);
  font-size: 13px;
  font-weight: 500;
  padding: 8px 16px;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  width: fit-content;
  margin: 10px auto 0;
  transition: background 0.2s;
}

.secondary-button:active { background: #e5e5ea; }
</style>
</head>

<body>
<div class="app">
  <div class="header"><h1>ì¼ë³¸ì–´ ë‹¨ì–´ì¥</h1></div>

  <div class="tabs">
    <div class="tab" data-tab="add">ì¶”ê°€</div>
    <div class="tab active" data-tab="list">ë¦¬ìŠ¤íŠ¸</div>
    <div class="tab" data-tab="quiz">í€´ì¦ˆ</div>
  </div>

  <div class="section" id="add">
    <div class="card">
      <textarea id="bulkInput" placeholder="ë¨¹ë‹¤ = é£Ÿã¹ã‚‹&#10;ë³´ë‹¤ / è¦‹ã‚‹"></textarea>
      <div class="divider"></div>
      <div class="button" onclick="addBulkWords()">ë‹¨ì–´ ì¶”ê°€</div>
    </div>
  </div>

  <div class="section active" id="list">
    <div class="card">
      <div style="display: flex; flex-direction: column; gap: 8px;">
        <div class="button" onclick="exportWords()" style="border: 1px solid var(--divider); border-radius: 10px; padding: 10px 0;">ë‹¨ì–´ íŒŒì¼ë¡œ ì €ì¥</div>
        <div class="button" onclick="fileInput.click()" style="border: 1px solid var(--divider); border-radius: 10px; padding: 10px 0;">ë‹¨ì–´ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°</div>
      </div>
      <input type="file" id="fileInput" accept=".json" style="display:none">
      <div class="divider"></div>

      <div style="display: flex; gap: 8px; margin-bottom: 15px; align-items: stretch;">
        <input type="text" id="wordSearch" onkeyup="renderList()" placeholder="ğŸ” ê²€ìƒ‰" 
          style="flex: 2; padding: 10px 12px; font-size: 14px; border: 1px solid var(--divider); border-radius: 10px; background: #fff; outline: none; -webkit-appearance: none;">
        
        <select id="listGroupFilter" onchange="renderList()" style="flex: 1.2; border-radius: 10px; border: 1px solid var(--divider); padding: 8px; font-size: 13px; background: #fff;">
          <option value="all">ì „ì²´ ë ˆë²¨</option>
          <option value="JLPT 5">JLPT 5</option>
          <option value="JLPT 4">JLPT 4</option>
          <option value="JLPT 3">JLPT 3</option>
          <option value="JLPT 2">JLPT 2</option>
          <option value="JLPT 1">JLPT 1</option>
        </select>

        <select id="listPosFilter" onchange="renderList()" style="flex: 1; border-radius: 10px; border: 1px solid var(--divider); padding: 8px; font-size: 13px; background: #fff;">
          <option value="all">í’ˆì‚¬</option>
          <option value="ëª…ì‚¬">ëª…ì‚¬</option>
          <option value="ë™ì‚¬">ë™ì‚¬</option>
          <option value="í˜•ìš©ì‚¬">í˜•ìš©ì‚¬</option>
          <option value="ë¶€ì‚¬">ë¶€ì‚¬</option>
        </select>
      </div>

      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 0 4px;">
        <div style="font-size: 13px; color: var(--accent); cursor: pointer; font-weight: 600;" onclick="toggleAllVisibleChecks(true)">ì „ì²´ ì„ íƒ</div>
        <div style="font-size: 13px; color: var(--secondary); cursor: pointer;" onclick="toggleAllVisibleChecks(false)">ì„ íƒ í•´ì œ</div>
        <div style="font-size: 13px; color: #ff9500; cursor: pointer; font-weight: 600;" id="rangeModeBtn" onclick="toggleRangeMode()">ë²”ìœ„ ì„ íƒ: ë„ê¸°</div>
      </div>

      <div id="batchEditBar" style="display: none; background: #f2f2f7; padding: 10px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--divider);">
        <div style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--secondary);">ì„ íƒ í•­ëª© ì¼ê´„ ë³€ê²½:</div>
        <div style="display: flex; gap: 5px; flex-wrap: wrap;">
          <select id="batchGroup" style="flex: 1; padding: 5px; font-size: 12px;">
            <option value="">ë ˆë²¨ ì„ íƒ</option>
            <option value="JLPT 5">JLPT 5</option>
            <option value="JLPT 4">JLPT 4</option>
            <option value="JLPT 3">JLPT 3</option>
            <option value="JLPT 2">JLPT 2</option>
            <option value="JLPT 1">JLPT 1</option>
          </select>
          <select id="batchPos" style="flex: 1; padding: 5px; font-size: 12px;">
            <option value="">í’ˆì‚¬ ì„ íƒ</option>
            <option value="ëª…ì‚¬">ëª…ì‚¬</option>
            <option value="ë™ì‚¬">ë™ì‚¬</option>
            <option value="í˜•ìš©ì‚¬">í˜•ìš©ì‚¬</option>
            <option value="ë¶€ì‚¬">ë¶€ì‚¬</option>
          </select>
          <div style="display: flex; gap: 4px; width: 100%; margin-top: 8px;">
            <div class="secondary-button" onclick="applyBatchEdit()" style="flex: 1; margin: 0;">ì ìš©</div>
            <div class="secondary-button" onclick="deleteBatchWords()" style="flex: 1; margin: 0; background: #ffe5e5; color: #ff3b30; border: 1px solid #ff3b30;">ì‚­ì œ</div>
            <div class="secondary-button" onclick="toggleAllVisibleChecks(false)" style="flex: 1; margin: 0; background: white; border: 1px solid var(--divider);">ì·¨ì†Œ</div>
          </div>
        </div>
      </div>

      <div id="wordList"></div>
    </div>
  </div>

  <div class="section" id="quiz">
    <div class="card">
      <div class="select-container" style="flex-direction: column; gap: 8px;">
        <div style="display: flex; gap: 8px; width: 100%;">
          <select id="quizGroupFilter" onchange="startQuiz()" style="flex: 1;">
            <option value="all">ëª¨ë“  ë ˆë²¨</option>
            <option value="JLPT 5">JLPT 5</option>
            <option value="JLPT 4">JLPT 4</option>
            <option value="JLPT 3">JLPT 3</option>
            <option value="JLPT 2">JLPT 2</option>
            <option value="JLPT 1">JLPT 1</option>
          </select>
          <select id="quizPosFilter" onchange="startQuiz()" style="flex: 1;">
            <option value="all">ëª¨ë“  í’ˆì‚¬</option>
            <option value="ëª…ì‚¬">ëª…ì‚¬</option>
            <option value="ë™ì‚¬">ë™ì‚¬</option>
            <option value="í˜•ìš©ì‚¬">í˜•ìš©ì‚¬</option>
            <option value="ë¶€ì‚¬">ë¶€ì‚¬</option>
          </select>
        </div>
        <select id="quizModeSelect">
          <option value="ko-jp">í•œêµ­ì–´ â†’ ì¼ë³¸ì–´</option>
          <option value="jp-ko">ì¼ë³¸ì–´ â†’ í•œêµ­ì–´</option>
        </select>
      </div>
      <div class="quiz-question" id="quizQuestion"></div>
      <input class="quiz-input" id="quizAnswer" placeholder="ì¼ë³¸ì–´ ì…ë ¥">
      <div class="result" id="quizResult"></div>
      <div class="progress" id="quizProgress"></div>
      <div class="divider"></div>
      
      <div class="secondary-button" onclick="startQuiz()" style="margin: 8px auto; width: 80%;">
        â†» í€´ì¦ˆ ìƒˆë¡œ ì‹œì‘
      </div>
      <div class="secondary-button" onclick="startFailQuiz()" style="margin: 8px auto; width: 80%; background: #ffe5e5; color: #ff3b30; border: 1px solid #ff3b30;">
        ğŸ”¥ ì˜¤ë‹µ ë…¸íŠ¸ í€´ì¦ˆ (í‹€ë¦° ë‹¨ì–´ë§Œ)
      </div>
    </div>
  </div>
</div>

<div id="scrollButtons" style="position: fixed; bottom: 80px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000;">
  <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})" style="width: 44px; height: 44px; background: var(--accent); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: bold; cursor: pointer; opacity: 0.9;">â†‘</div>
  <div onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})" style="width: 44px; height: 44px; background: var(--accent); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); font-weight: bold; cursor: pointer; opacity: 0.9;">â†“</div>
</div>

<script>
let words = JSON.parse(localStorage.getItem("jpWords")) || [];
let quizQueue = JSON.parse(localStorage.getItem("quizQueue")) || [];
let quizIndex = parseInt(localStorage.getItem("quizIndex")) || 0;
let quizMode = "ko-jp";
let isComposing = false;
let lastChecked = null;
let isRangeMode = false;
let firstCheckedIndex = null;

function toggleRangeMode() {
  isRangeMode = !isRangeMode;
  const btn = document.getElementById("rangeModeBtn");
  btn.innerText = isRangeMode ? "ë²”ìœ„ ì„ íƒ: ì¼œì§" : "ë²”ìœ„ ì„ íƒ: ë„ê¸°";
  btn.style.color = isRangeMode ? "#007aff" : "#ff9500";
  if (!isRangeMode) firstCheckedIndex = null;
}

document.querySelectorAll(".tab").forEach(tab => {
  tab.addEventListener("click", () => {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    tab.classList.add("active");
    document.getElementById(tab.dataset.tab).classList.add("active");
    if (tab.dataset.tab === "list") renderList();
    if (tab.dataset.tab === "quiz") {
      if (!quizQueue.length) startQuiz();
      else renderCurrentQuiz(false);
    }
  });
});

// ë‹¨ì–´ ì¶”ê°€: unshiftë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ ë§¨ ì•ì— ì¶”ê°€
function addBulkWords() {
  const bulkInput = document.getElementById("bulkInput");
  const lines = bulkInput.value.split("\n");
  let added = 0;
  lines.forEach(line => {
    const clean = line.trim();
    if (!clean) return;
    const parts = clean.includes("=") ? clean.split("=") : clean.split("/");
    if (parts.length < 2) return;
    const ko = parts[0].trim();
    const jp = parts[1].trim();
    if (ko && jp) {
      // push ëŒ€ì‹  unshift ì‚¬ìš©
      words.unshift({ ko, jp, group: "JLPT 5", pos: "ëª…ì‚¬", failCount: 0 });
      added++;
    }
  });
  if (added) {
    localStorage.setItem("jpWords", JSON.stringify(words));
    bulkInput.value = "";
    alert(`${added}ê°œ ë‹¨ì–´ê°€ ë§¨ ìœ„ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
    renderList();
    startQuiz();
  }
}

function renderList() {
  const listContainer = document.getElementById("wordList");
  const gf = document.getElementById("listGroupFilter").value;
  const pf = document.getElementById("listPosFilter").value;
  const searchTerm = document.getElementById("wordSearch").value.toLowerCase().trim();
  listContainer.innerHTML = "";
  words.forEach((w, i) => {
    const matchesSearch = w.ko.toLowerCase().includes(searchTerm) || w.jp.toLowerCase().includes(searchTerm);
    if (!matchesSearch) return;
    const matchG = (gf === "all") || (w.group || "JLPT 5") === gf;
    const matchP = (pf === "all") || (w.pos || "ëª…ì‚¬") === pf;
    if (!matchG || !matchP) return;
    const div = document.createElement("div");
    div.className = "word-item";
    div.innerHTML = `
      <input type="checkbox" class="word-checker" data-index="${i}" onclick="handleCheck(event, this)">
      <div style="grid-column: span 3; display: flex; gap: 10px;">
        <select style="font-size: 11px; font-weight: 600; color: var(--accent); border:none; background:none;" onchange="editWord(${i}, 'group', this.value)">
          <option value="JLPT 5" ${w.group==='JLPT 5'?'selected':''}>JLPT 5</option>
          <option value="JLPT 4" ${w.group==='JLPT 4'?'selected':''}>JLPT 4</option>
          <option value="JLPT 3" ${w.group==='JLPT 3'?'selected':''}>JLPT 3</option>
          <option value="JLPT 2" ${w.group==='JLPT 2'?'selected':''}>JLPT 2</option>
          <option value="JLPT 1" ${w.group==='JLPT 1'?'selected':''}>JLPT 1</option>
        </select>
        <select style="font-size: 11px; font-weight: 600; color: #5856d6; border:none; background:none;" onchange="editWord(${i}, 'pos', this.value)">
          <option value="ëª…ì‚¬" ${w.pos==='ëª…ì‚¬'?'selected':''}>ëª…ì‚¬</option>
          <option value="ë™ì‚¬" ${w.pos==='ë™ì‚¬'?'selected':''}>ë™ì‚¬</option>
          <option value="í˜•ìš©ì‚¬" ${w.pos==='í˜•ìš©ì‚¬'?'selected':''}>í˜•ìš©ì‚¬</option>
          <option value="ë¶€ì‚¬" ${w.pos==='ë¶€ì‚¬'?'selected':''}>ë¶€ì‚¬</option>
        </select>
        ${w.failCount > 0 ? `<span style="font-size: 10px; color: #ff3b30;">ğŸ”¥ ${w.failCount}</span>` : ''}
      </div>
      <div></div>
      <input type="text" value="${w.ko}" onchange="editWord(${i}, 'ko', this.value)">
      <input type="text" value="${w.jp}" onchange="editWord(${i}, 'jp', this.value)">
      <button onclick="deleteWord(${i})">âˆ’</button>
    `;
    listContainer.appendChild(div);
    const d = document.createElement("div");
    d.className = "divider";
    listContainer.appendChild(d);
  });
  updateBatchBar();
}

function editWord(i, k, v) { words[i][k] = v; localStorage.setItem("jpWords", JSON.stringify(words)); }
function deleteWord(i) {
  if(confirm("ì‚­ì œí• ê¹Œìš”?")) { words.splice(i, 1); localStorage.setItem("jpWords", JSON.stringify(words)); renderList(); startQuiz(); }
}

const quizAns = document.getElementById("quizAnswer");
quizAns.addEventListener("compositionstart", () => isComposing = true);
quizAns.addEventListener("compositionend", () => isComposing = false);
quizAns.addEventListener("keydown", e => {
  if (e.key !== "Enter" || isComposing) return;
  const curr = quizQueue[quizIndex];
  if (!curr) return;
  const correct = quizMode === "ko-jp" ? curr.jp : curr.ko;
  if (quizAns.value.trim() === correct) {
    document.getElementById("quizResult").innerText = "ì •ë‹µ! (æ­£è§£ï¼)";
    quizIndex++;
    setTimeout(() => { renderCurrentQuiz(); }, 600);
  } else {
    const original = words.find(w => w.ko === curr.ko && w.jp === curr.jp);
    if (original) {
      original.failCount = (original.failCount || 0) + 1;
      localStorage.setItem("jpWords", JSON.stringify(words));
    }
    document.getElementById("quizResult").innerText = `ì˜¤ë‹µ! ì •ë‹µ: ${correct}`;
  }
  quizAns.value = "";
});

function startQuiz() {
  const gf = document.getElementById("quizGroupFilter").value;
  const pf = document.getElementById("quizPosFilter").value;
  const filtered = words.filter(w => (gf === "all" || (w.group || "JLPT 5") === gf) && (pf === "all" || (w.pos || "ëª…ì‚¬") === pf));
  quizQueue = [...filtered].sort(() => Math.random() - 0.5);
  quizIndex = 0;
  saveQuizState();
  renderCurrentQuiz();
}

function startFailQuiz() {
  const filtered = words.filter(w => (w.failCount || 0) > 0);
  if (!filtered.length) { alert("í‹€ë¦° ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤! (ã™ã°ã‚‰ã—ã„ï¼)"); return; }
  quizQueue = [...filtered].sort(() => Math.random() - 0.5);
  quizIndex = 0;
  saveQuizState();
  renderCurrentQuiz();
}

function renderCurrentQuiz(reset=true) {
  const qBox = document.getElementById("quizQuestion");
  const pBox = document.getElementById("quizProgress");
  const rBox = document.getElementById("quizResult");
  if (!quizQueue.length) { qBox.innerText = "ë‹¨ì–´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”"; pBox.innerText = "0 / 0"; return; }
  if (quizIndex >= quizQueue.length) { 
    qBox.innerText = "í€´ì¦ˆ ì™„ë£Œ! ğŸ‰"; 
    pBox.innerText = `${quizQueue.length}/${quizQueue.length}`;
    localStorage.removeItem("quizQueue");
    localStorage.removeItem("quizIndex");
    return; 
  }
  const curr = quizQueue[quizIndex];
  qBox.innerText = quizMode === "ko-jp" ? curr.ko : curr.jp;
  pBox.innerText = `ì§„í–‰: ${quizIndex + 1} / ${quizQueue.length}`;
  if (reset) { rBox.innerText = ""; quizAns.value = ""; }
  saveQuizState();
}

function saveQuizState() {
  localStorage.setItem("quizQueue", JSON.stringify(quizQueue));
  localStorage.setItem("quizIndex", quizIndex);
}

function toggleAllVisibleChecks(s) { document.querySelectorAll(".word-checker").forEach(c => c.checked = s); updateBatchBar(); }

function handleCheck(e, cb) {
  const currentIndex = parseInt(cb.dataset.index, 10);
  if (isRangeMode) {
    if (firstCheckedIndex === null) {
      firstCheckedIndex = currentIndex;
      cb.checked = true;
    } else {
      const start = Math.min(firstCheckedIndex, currentIndex);
      const end = Math.max(firstCheckedIndex, currentIndex);
      document.querySelectorAll(".word-checker").forEach(c => {
        const idx = parseInt(c.dataset.index, 10);
        if (idx >= start && idx <= end) c.checked = true;
      });
      firstCheckedIndex = null;
    }
  } else {
    if (e.shiftKey && lastChecked) {
      let inB = false;
      document.querySelectorAll(".word-checker").forEach(c => {
        if (c === cb || c === lastChecked) inB = !inB;
        if (inB) c.checked = lastChecked.checked;
      });
    }
    lastChecked = cb;
  }
  updateBatchBar();
}

function updateBatchBar() {
  const cnt = document.querySelectorAll(".word-checker:checked").length;
  document.getElementById("batchEditBar").style.display = cnt > 0 ? "block" : "none";
}

function applyBatchEdit() {
  const tg = document.getElementById("batchGroup").value;
  const tp = document.getElementById("batchPos").value;
  document.querySelectorAll(".word-checker:checked").forEach(c => {
    const idx = parseInt(c.dataset.index, 10);
    if (tg) words[idx].group = tg;
    if (tp) words[idx].pos = tp;
  });
  localStorage.setItem("jpWords", JSON.stringify(words));
  renderList();
  alert("ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
}

function deleteBatchWords() {
  const checks = document.querySelectorAll(".word-checker:checked");
  if (!confirm(`${checks.length}ê°œ ì‚­ì œí• ê¹Œìš”?`)) return;
  const idxs = Array.from(checks).map(c => parseInt(c.dataset.index, 10)).sort((a,b)=>b-a);
  idxs.forEach(idx => words.splice(idx, 1));
  localStorage.setItem("jpWords", JSON.stringify(words));
  renderList();
  startQuiz();
}

function exportWords() {
  const blob = new Blob([JSON.stringify(words, null, 2)], {type: "application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "jp_words.json";
  a.click();
}

const fileInput = document.getElementById("fileInput");
fileInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    try {
      words = JSON.parse(reader.result);
      localStorage.setItem("jpWords", JSON.stringify(words));
      renderList(); startQuiz(); alert("ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ");
    } catch { alert("íŒŒì¼ ì˜¤ë¥˜"); }
  };
  reader.readAsText(file);
});

document.getElementById("quizModeSelect").addEventListener("change", (e) => { quizMode = e.target.value; renderCurrentQuiz(false); });

if (words.length > 0) { renderList(); renderCurrentQuiz(false); }
</script>
</body>
</html>
